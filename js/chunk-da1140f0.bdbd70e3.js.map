{"version":3,"sources":["webpack:///./src/mixins/setScroll.js","webpack:///./src/components/BlogComment/comment.vue?aa2b","webpack:///./src/components/BlogComment/index.vue?7fec","webpack:///./src/components/BlogComment/inputBox.vue?8ffb","webpack:///src/components/BlogComment/inputBox.vue","webpack:///./src/components/BlogComment/inputBox.vue?3842","webpack:///./src/components/BlogComment/inputBox.vue","webpack:///./src/components/BlogComment/comment.vue?af9e","webpack:///src/components/BlogComment/comment.vue","webpack:///./src/components/BlogComment/comment.vue?b31a","webpack:///./src/components/BlogComment/comment.vue","webpack:///src/components/BlogComment/index.vue","webpack:///./src/components/BlogComment/index.vue?1b9c","webpack:///./src/components/BlogComment/index.vue","webpack:///./src/views/Message/index.vue?8c09","webpack:///./src/api/postMessage.js","webpack:///src/views/Message/index.vue","webpack:///./src/views/Message/index.vue?9fa9","webpack:///./src/views/Message/index.vue","webpack:///./src/components/BlogComment/index.vue?7d17","webpack:///./src/components/BlogComment/inputBox.vue?f5da","webpack:///./src/views/Message/index.vue?caf7","webpack:///./src/mixins/feachApi.js"],"names":["refsDom","mounted","this","$refs","addEventListener","handleScrollMiXins","$Bus","$on","setScrollMiXins","destroyed","$emit","$off","methods","n","scrollTop","render","_vm","_h","$createElement","_c","_self","staticClass","_g","$listeners","attrs","title","subTitle","list","directives","name","rawName","value","expression","_v","_s","isMore","staticRenderFns","ref","on","$event","preventDefault","handleSubmit","apply","arguments","formData","domProps","target","composing","$set","nickName","length","error","content","isSubmiting","computed","showMessage","msg","type","container","form","callBack","component","_l","item","i","key","avatar","nickname","formatDate","createDate","components","Avatar","InputBox","Comment","props","data","total","rows","isLoading","async","postMessage","comment","request","post","getMessage","page","limit","keyword","get","params","mixins","BlogComment","result","unshift","callback","clientHeight","scrollHeight","getMoreComments","resp","concat","sortData","typeDefault","feachData","sort","a","b"],"mappings":"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","file":"js/chunk-da1140f0.bdbd70e3.js","sourcesContent":["export default function(refsDom) {\r\n    return {\r\n        mounted() {\r\n            this.$refs[refsDom].addEventListener('scroll', this.handleScrollMiXins);\r\n            this.$Bus.$on('setScroll', this.setScrollMiXins);\r\n        },\r\n        destroyed() {\r\n            this.$Bus.$emit('scroll');\r\n            this.$Bus.$emit('del')\r\n            this.$Bus.$off('setScroll', this.setScrollMiXins);\r\n        },\r\n        methods: {\r\n            setScrollMiXins(n) {\r\n                this.$refs[refsDom].scrollTop = n;\r\n            },\r\n            handleScrollMiXins() {\r\n                this.$Bus.$emit('scroll', this.$refs[refsDom])\r\n            },\r\n        }\r\n    }\r\n};","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=style&index=0&id=303af646&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"blogComment-container\"},[_c('InputBox',_vm._g({},_vm.$listeners)),_c('Comment',{attrs:{\"title\":_vm.title,\"subTitle\":_vm.subTitle,\"list\":_vm.list}}),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticClass:\"loading\"},[_vm._v(_vm._s(_vm.isMore ? '没有更多数据' : ''))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{ref:\"form\",staticClass:\"inputBox-container\",attrs:{\"id\":\"data-form-container\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"divInput\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.nickName),expression:\"formData.nickName\"}],staticClass:\"nickName\",attrs:{\"type\":\"text\",\"placeholder\":\"用户昵称\",\"maxlength\":\"10\"},domProps:{\"value\":(_vm.formData.nickName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"nickName\", $event.target.value)}}}),_c('span',{staticClass:\"example\"},[_vm._v(_vm._s(_vm.formData.nickName.length)+\"/10\")]),_c('p',{staticClass:\"nickNameHint\"},[_vm._v(_vm._s(_vm.error.nickName))])]),_c('div',{staticClass:\"commentBox\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.content),expression:\"formData.content\"}],staticClass:\"comment\",attrs:{\"cols\":\"\",\"rows\":\"\",\"type\":\"text\",\"placeholder\":\"请输入内容\",\"maxlength\":\"300\"},domProps:{\"value\":(_vm.formData.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"content\", $event.target.value)}}}),_c('p',{staticClass:\"commentHint\"},[_vm._v(_vm._s(_vm.error.content))])]),_c('button',{staticClass:\"submit\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isSubmiting}},[_vm._v(\" \"+_vm._s(_vm.isSubmiting ? \"提交...\" : \"提交\")+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <form id=\"data-form-container\" @submit.prevent=\"handleSubmit\" class=\"inputBox-container\" ref=\"form\">\r\n    <div class=\"divInput\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"用户昵称\"\r\n        class=\"nickName\"\r\n        maxlength=\"10\"\r\n        v-model=\"formData.nickName\"\r\n      />\r\n      <span class=\"example\">{{ formData.nickName.length }}/10</span>\r\n      <p class=\"nickNameHint\">{{ error.nickName }}</p>\r\n    </div>\r\n    <div class=\"commentBox\">\r\n      <textarea\r\n        cols=\"\"\r\n        rows=\"\"\r\n        type=\"text\"\r\n        class=\"comment\"\r\n        placeholder=\"请输入内容\"\r\n        maxlength=\"300\"\r\n        v-model=\"formData.content\"\r\n      ></textarea>\r\n      <p class=\"commentHint\">{{ error.content }}</p>\r\n    </div>\r\n    <button type=\"submit\" :disabled=\"isSubmiting\" class=\"submit\">\r\n      {{ isSubmiting ? \"提交...\" : \"提交\" }}\r\n    </button>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      formData: {\r\n        nickName: \"\",\r\n        content: \"\",\r\n      },\r\n      error: {\r\n        nickName: \"\",\r\n        content: \"\",\r\n      },\r\n      isSubmiting: false,\r\n    };\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    handleSubmit() {\r\n      if (!this.formData.nickName) {\r\n        this.error.nickName = \"请填写昵称\";\r\n      } else {\r\n        this.error.nickName = \"\";\r\n      }\r\n      if (!this.formData.content) {\r\n        this.error.content = \"请填写内容\";\r\n      } else {\r\n        this.error.content = \"\";\r\n      }\r\n      if (this.error.nickName || this.error.content) {\r\n        return;\r\n      }\r\n      this.isSubmiting = true;\r\n      this.$emit(\"submit\", this.formData, (msg) => {\r\n        showMessage({\r\n          content: msg,\r\n          type: \"ok\",\r\n          container: this.$refs.form,\r\n          callBack: () => {\r\n            this.isSubmiting = false;\r\n            this.formData.nickName = \"\";\r\n            this.formData.content = \"\";\r\n          },\r\n        });\r\n      }); //让父组件做，还要清空评论。\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/styles/global.less\";\r\n@import \"~@/styles/var.less\";\r\n\r\n.inputBox-container {\r\n  font-size: 14px;\r\n  position: relative;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  input,\r\n  textarea {\r\n    outline: none;\r\n    border: 1px dashed black;\r\n  }\r\n  .divInput {\r\n    position: relative;\r\n    .nickName {\r\n      width: 250px;\r\n      padding: 0.5em;\r\n    }\r\n    .example {\r\n      position: absolute;\r\n      left: 230px;\r\n      color: @lightWords;\r\n      top: 4px;\r\n    }\r\n  }\r\n  .commentBox {\r\n    margin-top: 2em;\r\n    .comment {\r\n      padding: 1em;\r\n      width: 90%;\r\n      height: 60px;\r\n      resize: none;\r\n    }\r\n  }\r\n  .nickNameHint,\r\n  .commentHint {\r\n    color: @warn;\r\n    margin: 0.2em 0;\r\n    position: absolute;\r\n  }\r\n  .submit {\r\n    width: 70px;\r\n    padding: 0.5em;\r\n    margin-top: 2em;\r\n    background: @primary;\r\n    border: none;\r\n    color: #fff;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n    &:hover {\r\n      background: darken(@primary, 10);\r\n    }\r\n    &:disabled {\r\n      background: darken(@warn, 20%);\r\n      cursor: not-allowed;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./inputBox.vue?vue&type=template&id=ea02ed32&scoped=true&\"\nimport script from \"./inputBox.vue?vue&type=script&lang=js&\"\nexport * from \"./inputBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./inputBox.vue?vue&type=style&index=0&id=ea02ed32&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ea02ed32\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comment-container\"},[_c('h4',[_vm._v(_vm._s(_vm.title)+\"(\"+_vm._s(_vm.subTitle)+\")\")]),_c('div',{staticClass:\"comment\"},[_c('ul',_vm._l((_vm.list),function(item,i){return _c('li',{key:i},[_c('div',[_c('Avatar',{attrs:{\"url\":item.avatar,\"size\":44}}),_c('div',[_c('h6',[_vm._v(_vm._s(item.nickname))]),_c('span',[_vm._v(_vm._s(_vm.formatDate(item.createDate,true)))]),_c('p',[_vm._v(\" \"+_vm._s(item.content)+\" \")])])],1),_c('hr')])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"comment-container\" >\r\n    <h4>{{title}}({{subTitle}})</h4>\r\n    <div class=\"comment\">\r\n      <ul>\r\n        <li v-for=\"(item,i) in list\" :key=\"i\">\r\n          <div><Avatar\r\n            :url=\"item.avatar\"\r\n            :size=\"44\"\r\n            />\r\n              <div>\r\n                <h6>{{item.nickname}}</h6>\r\n                <span>{{formatDate(item.createDate,true)}}</span>\r\n                <p>\r\n                    {{item.content}}\r\n                </p>\r\n              </div>\r\n          </div>\r\n          <hr>\r\n        </li>\r\n\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Avatar from \"@/components/avatar\";\r\nimport {formatDate}  from '@/utils';\r\nexport default {\r\n  components: {\r\n    Avatar,\r\n  },\r\n  methods: {\r\n      formatDate(time,boolean) {\r\n          return formatDate(time,boolean);\r\n      },\r\n  },\r\n    props:{\r\n      title: {\r\n          type: String,\r\n          default: \"\",\r\n      },\r\n      subTitle:{\r\n          type: String,\r\n          default: \"\"\r\n      },\r\n      list: {\r\n          type: Array,\r\n          default: []\r\n      },\r\n  },\r\n  created(){\r\n     \r\n  },\r\n  updated() { \r\n  }\r\n    };\r\n    </script>\r\n\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n@import \"~@/styles/global.less\";\r\n@import \"~@/styles/var.less\";\r\n.comment-container {\r\n  width: 100%;\r\n  h4 {\r\n    margin: 2em 0;\r\n  }\r\n  .comment {\r\n    width: 100%;\r\n    li>div {\r\n        display:flex;\r\n      div {\r\n          flex: 1 1 auto;\r\n        position: relative;\r\n        padding-left: 1em;\r\n        box-sizing: border-box;\r\n        h6 {\r\n          color: @primary;\r\n            }\r\n        p{\r\n            margin-top: 0.5em;\r\n        }\r\n        span{\r\n            position:absolute;\r\n           right: 10px;\r\n            top: 0px;\r\n            color: @lightWords;\r\n            font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comment.vue?vue&type=template&id=303af646&scoped=true&\"\nimport script from \"./comment.vue?vue&type=script&lang=js&\"\nexport * from \"./comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comment.vue?vue&type=style&index=0&id=303af646&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"303af646\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"blogComment-container\">\r\n    <InputBox \r\n        v-on='$listeners'\r\n    />\r\n    <Comment \r\n        :title=\"title\"\r\n        :subTitle='subTitle'\r\n        :list='list'    \r\n    />\r\n    <div class=\"loading\"  v-loading='listLoading' >{{isMore ? '没有更多数据' : ''}}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InputBox from \"./inputBox.vue\";\r\nimport Comment from \"./comment.vue\";\r\nexport default {\r\n  components: {\r\n    InputBox,\r\n    Comment,\r\n  },\r\n  data() {\r\n    return {};\r\n  },\r\n  props:{\r\n      isMore:{\r\n        type: Boolean,\r\n        default: false,\r\n        required:true,\r\n      },\r\n      title: {\r\n          type: String,\r\n          default: \"\",\r\n      },\r\n      subTitle:{\r\n          type: String,\r\n          default: \"\"\r\n      },\r\n      list: {\r\n          type: Array,\r\n          default: []\r\n      },\r\n      listLoading:{\r\n          type: Boolean,\r\n          default: false, \r\n      },\r\n  },\r\n  methods: {\r\n    //   handleSubmit(formData,callback){\r\n    //       this.$emit('submit',formData,callback)\r\n    //   }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.blogComment-container {\r\n  width: 100%;\r\n  padding: 1em;\r\n  box-sizing: border-box;\r\n}\r\n.loading{\r\n  height: 100px;\r\n  width: 100%;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7c6c8ba4&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=7c6c8ba4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c6c8ba4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"container\",staticClass:\"message-container\"},[_c('BlogComment',{attrs:{\"isMore\":_vm.isMore,\"title\":'留言板',\"subTitle\":_vm.data.total + '',\"list\":_vm.data.rows,\"listLoading\":_vm.isLoading},on:{\"submit\":_vm.handleSubmit}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from './request';\r\nexport async function postMessage(comment) {\r\n    return await request.post(\"/api/message\", comment);\r\n}\r\nexport async function getMessage(page = 1, limit = 10, keyword = '') {\r\n    return await request.get(\"/api/message\", 'get', {\r\n        params: {\r\n            page,\r\n            limit,\r\n            keyword,\r\n        }\r\n    });\r\n}","<template>\r\n  <div class=\"message-container\" ref=\"container\">\r\n    <BlogComment\r\n      :isMore=\"isMore\"\r\n      :title=\"'留言板'\"\r\n      :subTitle=\"data.total + ''\"\r\n      :list=\"data.rows\"\r\n      :listLoading=\"isLoading\"\r\n      @submit=\"handleSubmit\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BlogComment from \"@/components/BlogComment\";\r\nimport { postMessage, getMessage } from \"@/api/postMessage\";\r\nimport feachApi from \"@/mixins/feachApi\";\r\nimport setScroll from \"@/mixins/setScroll\";\r\nexport default {\r\n  mixins: [feachApi([]), setScroll(\"container\")],\r\n  components: {\r\n    BlogComment,\r\n  },\r\n  methods: {\r\n    async handleSubmit(formData,callback) {\r\n      let result = await postMessage({\r\n        ...formData,\r\n      });\r\n      this.data.rows.unshift(result);\r\n      this.data.total++;\r\n      callback(\"留言成功\");\r\n    },\r\n    async feachData() {\r\n      return await getMessage();\r\n    },\r\n    async handleScrollMiXins() {\r\n      //\r\n      this.$Bus.$emit(\"scroll\", this.$refs.container);\r\n      if (this.isLoading) {\r\n        return;\r\n      }\r\n      const clientHeight = this.$refs.container.clientHeight;\r\n      const scrollTop = this.$refs.container.scrollTop;\r\n      const scrollHeight = this.$refs.container.scrollHeight;\r\n      if (scrollHeight - (clientHeight + scrollTop) < 80) {\r\n        await this.getMoreComments();\r\n      }\r\n    },\r\n    async getMoreComments() {//滑动到底部，就调用此方法\r\n      if (this.isMore) {//没有更多数据，直接返回了\r\n        return;\r\n      }\r\n      this.page++;\r\n      this.isLoading = true;\r\n      const resp = await getMessage(this.page, this.limit);\r\n      this.data.total = resp.total;\r\n      this.data.rows = this.data.rows.concat(resp.rows);\r\n      this.sortData();\r\n      this.isLoading = false;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      data: {\r\n        rows: [],\r\n        total: \"0\",\r\n      },\r\n      page: 1,\r\n      limit: 10,\r\n    };\r\n  },\r\n  computed: {\r\n    isMore() {\r\n      return this.data.rows.length >= this.data.total;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.message-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow-y: scroll;\r\n  scroll-behavior: smooth;\r\n  justify-content: center;\r\n  display: flex;\r\n  .blogComment-container {\r\n    width: 80%;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f1e93648&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f1e93648&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f1e93648\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=7c6c8ba4&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./inputBox.vue?vue&type=style&index=0&id=ea02ed32&lang=less&scoped=true&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=f1e93648&lang=less&scoped=true&\"","export default function(typeDefault = null) {\r\n    return {\r\n        data() {\r\n            return {\r\n                data: typeDefault, //先定义好数据  \r\n                isLoading: true,\r\n            }\r\n        },\r\n        async created() { //在数据响应式后执行执行该promise\r\n            this.data = await this.feachData();\r\n            this.sortData();\r\n            this.isLoading = false;\r\n        },\r\n        methods: {\r\n            sortData() {\r\n                if (this.data.rows) {\r\n                    this.data.rows.sort((a, b) => {\r\n                        return b.createDate - a.createDate\r\n                    })\r\n                }\r\n            },\r\n        }\r\n    }\r\n}"],"sourceRoot":""}